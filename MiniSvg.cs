using System;
using System.Collections.Generic;
using System.Text;
using System.Xml;

namespace andrea_svg
{
    public class SVG_d_block
    {
        public double a;
        public double b;

        public override string ToString()
        {
            return a.ToString().Replace(',', '.') + " " + b.ToString().Replace(',', '.');
        }

        public SVG_d_block(double ia, double ib)
        {
            b = ib;
            a = ia;
        }

        public static SVG_d_block Scale(SVG_d_block a, Double s) { return new SVG_d_block(a.a * s, a.b * s); }
        public static SVG_d_block Move(SVG_d_block a, Double x, Double y) { return new SVG_d_block(a.a + x, a.b + y); }

        public bool Equals(SVG_d_block i)
        {
            return Math.Abs(a-i.a)<0.5 && Math.Abs(b-i.b)<0.5;
        }
    }

    public struct SVG_rec
    {
        public double xs = 0;
        public double ys = 0;
        public double xe = 0;
        public double ye = 0;
        public double lung_tratto=0;
        public double lung_tot=0;

        public double Area=0;

        /*public static double dist(SVG_rec a,SVG_rec b){
            double dxab = a.xe - b.xe;
        }*/
    }

    public abstract class SVG_outDriver
    {
        public double xp;
        public double yp;

        public abstract void BezierTo(
                double x, double y,
                double cx1, double cy1,
                double cx2, double cy2);
        public abstract void BezierTo(
                double x, double y,
                double cx, double cy);

        public abstract void LineTo(
            double x, double y);
        public abstract void BeginFigure(
            double x, double y);
        public abstract void CloseFigure();


        public void drawLine(
            double x1, double y1 ,double x2,double y2)
        {
            BeginFigure(x1, y1);
            LineTo(x2, y2);
            CloseFigure();
        }

        public void drawRec(double x1, double y1, double w, double h)
        {
            BeginFigure(x1, y1);
            LineTo(x1 + w, y1);
            LineTo(x1 + w, y1 + h);
            LineTo(x1, y1 + h);
            LineTo(x1, y1);
            CloseFigure();
        }

        public void Draw(List<SVG_d> path)
        {
            Draw(path, 1.0, 0, 0);
        }

        public void Draw(List<SVG_d> path, double scale, double xo, double yo)
        {
            double x = 0;
            double y = 0;
            xp = 0;
            yp = 0;
            double xs = 0;
            double ys = 0;
            double cx1 = 0;
            double cy1 = 0;
            double cx2 = 0;
            double cy2 = 0;
            int c = 0;
            int pc = 0;

            foreach (SVG_d e in path)
            {
                switch (e.code)
                {
                    case 'c':
                        c = 0;
                        while (c < e.data.Count)
                        {
                            xp = x;
                            yp = y;
                            cx1 = xp + e.data[c].a * scale;
                            cy1 = yp + e.data[c].b * scale;
                            c++;
                            cx2 = xp + e.data[c].a * scale;
                            cy2 = yp + e.data[c].b * scale;
                            c++;
                            x = x + e.data[c].a * scale;
                            y = y + e.data[c].b * scale;
                            c++;
                            BezierTo(x, y, cx1, cy1, cx2, cy2);
                        }
                        break;
                    case 'q':
                        c = 0;
                        while (c < e.data.Count)
                        {
                            xp = x;
                            yp = y;
                            cx1 = xp + e.data[c].a * scale;
                            cy1 = yp + e.data[c].b * scale;
                            c++;
                            x = x + e.data[c].a * scale;
                            y = y + e.data[c].b * scale;
                            c++;
                            BezierTo(x, y, cx1, cy1);
                        }
                        break;
                    case 'z':
                        LineTo(xs, ys);
                        x = xs;
                        y = ys;
                        CloseFigure();
                        break;
                    case 'm':
                        //Aggiungo punto zero
                        if (pc == 0)
                        {
                            x = xo;
                            y = yo;
                        }

                        x = x + e.data[0].a * scale;
                        y = y + e.data[0].b * scale;
                        BeginFigure(x, y);
                        xs = x;
                        ys = y;
                        xp = x;
                        yp = y;
                        break;
                    case 'l':
                        c = 0;
                        while (c < e.data.Count)
                        {
                            xp = x;
                            yp = y;
                            x = x + e.data[c].a * scale;
                            y = y + e.data[c].b * scale;
                            LineTo(x, y);
                            c++;
                        }
                        break;
                    case 'h':
                        c = 0;
                        while (c < e.data.Count)
                        {
                            xp = x;
                            x = x + e.data[c].a * scale;
                            LineTo(x, y);
                            c++;
                        }
                        break;
                    case 'v':
                        c = 0;
                        while (c < e.data.Count)
                        {
                            yp = y;
                            y = y + e.data[c].b * scale;
                            LineTo(x, y);
                            c++;
                        }
                        break;
                }
                pc++;
            }

            CloseFigure();
        }
    }    

    public class SVG_d
    {
        public char code;
        public List<SVG_d_block> data = new List<SVG_d_block>();

        public static bool Equals(List<SVG_d> a,List<SVG_d> b){
            if(a.Count != b.Count)return false;
            for(int c=0;c<a.Count;c++)if(!a[c].Equals(b[c]))return false;
            return true;
        }

        public static bool Eq(List<SVG_d> a,List<SVG_d> b){
            if(a.Count != b.Count)return false;
            for(int c=1;c<a.Count;c++)if(!a[c].Eq(b[c]))return false;
            return true;
        }

        public bool Equals(SVG_d i)
        {
            if(i.data.Count!=data.Count)return false;
            for(int c=0;c<data.Count;c++)if(!data[c].Equals(i.data[c]))return false;
            return true;
        }

        public bool Eq(SVG_d i)
        {
            //senza m
            if(i.data.Count!=data.Count)return false;            
            for(int c=0;c<data.Count;c++)if(!data[c].Equals(i.data[c]))return false;
            return true;
        }

        public static String sQ = "M 8.8494584,6.5074764 C 7.7183452,7.7061797 5.4562005,7.782889 4.4517861,6.3834514 3.4595234,7.3646204 1.4680812,7.0800387 1.0092599,5.686912 0.72341977,4.7943192 1.2958291,3.9693849 1.6616117,3.2006951 2.4036371,1.972651 3.9190834,1.4586919 5.2966842,1.6059148 6.2037052,1.5636383 7.2286553,1.9738972 7.2952032,3.0098526 7.3571068,3.9529019 6.635178,4.7046842 6.0351661,5.3458909 5.6800927,5.8198719 4.4751841,6.3393191 5.47359,6.7915264 6.5251053,7.4050598 7.8273432,6.9613144 8.8494584,6.5074764 Z M 6.9270961,3.8823144 C 7.1398462,3.007163 6.6311438,1.8728688 5.6245419,1.8707197 4.3500997,1.7544429 3.026341,2.2940611 2.1499792,3.2142971 1.426687,3.9669299 1.0124644,5.2162681 1.632909,6.150246 2.1350625,6.9469739 3.1387334,6.6635383 3.8780897,6.475792 4.5768602,6.138372 4.0306872,5.2523234 3.860893,4.7311037 3.6596916,3.8764845 4.3435422,5.0507897 4.393957,5.3664606 4.9665191,6.3116716 5.9598236,5.1217634 6.367232,4.5814256 6.5519837,4.3469247 6.7306578,4.1073478 6.9270961,3.8823144 Z";
        public static String sW = "M 9.5632445,1.8243778 C 9.1971113,3.9790988 7.2912182,5.4089082 6.6642243,7.4571215 5.7631284,6.2956214 5.6035663,4.757913 4.7914729,3.5465788 4.002544,3.5590042 3.5878948,4.4070182 3.104855,4.9196377 2.5749601,5.6464562 2.1765982,6.4562379 1.7704393,7.2555735 0.90030582,5.6055641 -0.02342398,3.7821982 0.27563108,1.8592826 0.68394322,2.11918 0.69212673,3.0664798 0.8114546,3.6103919 0.93758594,4.5583686 1.045547,5.5861566 1.6877413,6.3460838 2.5645034,4.8113028 3.947317,3.6588398 4.9382003,2.2067898 5.5454879,3.641001 5.6218609,5.3114607 6.6176903,6.5682695 7.507575,4.9636135 8.8437589,3.5441539 9.192011,1.6880473 9.169682,1.3217282 9.4868997,1.7629533 9.5632445,1.8243778 Z";
        public static String sE = "M 7.3862862,1.8278824 C 6.1115214,2.227316 4.655518,1.7264581 3.4672316,2.449376 2.6764002,3.0075235 3.1392027,4.3171769 4.1378434,4.115716 5.1591281,4.1640985 6.187327,3.7316146 7.1968362,4.0369803 6.4370826,4.4267244 5.514767,4.2543474 4.6873628,4.3781574 3.9955892,4.4156376 2.587917,4.4678544 2.9001095,5.4957566 3.0510709,6.4596793 4.0963063,7.1241824 5.0349082,6.8449215 5.7626788,6.7903276 6.2478299,5.7995506 6.7920929,5.7478196 6.153377,6.5999147 5.2300799,7.4352734 4.0875643,7.351906 3.1276479,7.2558723 2.6590122,6.280693 2.540024,5.4280548 2.4108671,4.7190186 2.4306381,3.9875367 2.5597023,3.2800204 2.0252307,2.4668638 2.8905068,1.5687569 3.7539173,1.7838912 4.9597846,1.6889554 6.1978216,1.5013832 7.3862862,1.8278824 Z";
        public static String sR = "M 8.6706778,6.3619253 C 8.0001573,7.2688366 6.6591029,7.2917078 5.7426742,6.7667055 4.556869,6.2168344 3.6053726,5.2797723 2.6598767,4.4155198 3.0878892,3.958724 3.9541538,4.238165 4.5516902,4.1873295 5.2320415,4.2275892 6.1322364,4.1621672 6.4426101,3.4503264 6.6176419,2.4036801 5.1751459,2.4104213 4.4628147,2.3522957 3.734546,2.2710841 2.8313777,2.1281168 2.2671453,2.705762 1.914139,3.4546018 2.4665843,4.2963441 2.1859092,5.0922174 2.1306893,5.5757179 2.1510267,6.5900174 1.9396572,6.7309497 1.4537058,5.6475638 1.9173378,4.4779825 1.9080155,3.3596348 2.0840127,2.6902016 1.1236447,2.5876001 1.1107521,2.2036099 2.0740197,1.8284014 3.1580112,1.8497016 4.1757871,1.9526123 5.1023934,2.0988804 6.1764988,2.0914391 6.8681262,2.8258937 7.233681,3.6834301 6.1493578,4.2783807 5.4332122,4.3642878 4.9864198,4.4260184 3.7903095,4.2993633 3.9636632,4.9209604 4.6504323,5.6720268 5.3918809,6.4857599 6.4419015,6.6792308 7.1865331,6.8589635 8.026632,6.8124671 8.6706778,6.3619253 Z";
        public static String sT = "M 8.0424021,1.8768719 C 6.9265752,2.3673636 5.6379131,1.7314263 4.5416155,2.3008697 3.9083139,2.9361532 4.4584283,3.8935515 4.1976543,4.663061 4.1419126,5.5290034 4.1482064,6.4257651 3.8100421,7.2408956 3.332262,5.6760529 4.2576651,4.0213949 3.673833,2.4784062 3.2930748,1.8155465 1.6407531,2.6926239 1.7436294,1.8339076 2.6143526,1.8270876 3.4856406,1.8495276 4.364376,1.7611566 5.5918339,1.7478286 6.814743,1.905152 8.0424021,1.8768719 Z";
        public static String sY = "M 8.0332383,0.20020794 C 6.8059968,1.4633079 5.1675585,2.5471681 4.7289585,4.3598904 4.6250763,5.2449606 4.7697221,6.1400979 4.6635487,7.0290016 4.6325004,7.5760212 4.810394,8.7028055 4.5341024,8.884925 4.088081,8.1361194 4.4388468,7.2208871 4.3562576,6.401238 4.3809235,4.7695031 4.0838956,2.9394527 2.7515595,1.8471692 2.4019411,1.5126791 1.3932426,0.76541468 1.8771494,0.39261667 2.7156167,0.57926315 2.9542669,1.5864533 3.4041918,2.2107501 3.7633134,3.0777155 4.9749013,3.2676648 5.3495044,2.3086541 5.8813961,1.6383334 6.5484219,1.102129 7.0821926,0.42107937 7.3368626,0.2112846 7.7133166,-0.00781682 8.0332383,0.20020794 Z";
        public static String sU = "M 8.2288748,6.8938878 C 7.7382803,7.752577 6.5247074,7.1832361 6.3569972,6.3706618 5.9784344,5.6176563 5.7524262,4.7913721 5.6708758,3.9534931 4.6170535,4.9336742 3.763914,6.2839103 2.3244619,6.726807 1.5134618,6.7467054 1.6272856,5.6933832 1.583971,5.1316111 1.4938484,3.9794189 1.6122837,2.8231615 1.7537947,1.6797271 2.3122564,2.6159408 1.9038944,3.7262131 1.8277371,4.7289507 1.6595295,5.3995321 2.2229475,6.7571245 2.9951596,5.9642311 4.4255021,4.9931459 5.8801513,3.7272915 6.2231377,1.9457749 6.5481559,1.8201333 6.4827487,2.9217791 6.3634639,3.2270399 6.1061573,4.1555664 6.1818125,5.1268224 6.5304754,6.0185266 6.7496989,6.7152973 7.5028836,7.3039126 8.2288748,6.8938878 Z";
        public static String sI = "M 5.2837138,1.8429883 C 4.9924131,3.6470302 4.7719705,5.4942706 5.0408298,7.315548 4.1542681,5.7873054 4.5973598,3.9701805 4.6927285,2.3108663 4.703645,1.9966978 4.9087814,1.4016684 5.2837138,1.8429883 Z";
        public static String sO = "M 8.0106422,4.3216929 C 7.3925898,6.2353775 5.2629338,7.2697194 3.3459036,7.1628607 2.5415754,7.2997366 1.7499014,6.6811506 1.7986517,5.8403032 1.6093245,4.2833966 2.3932847,2.5205264 3.8919486,1.9045271 4.6983576,1.7286476 5.5788461,1.8371517 6.3492569,2.1203264 7.2193574,2.5223183 7.8455302,3.3835237 8.0106422,4.3216929 Z M 7.6695772,4.0478079 C 7.3979582,2.7027305 5.8557559,1.9366077 4.5787872,2.292043 3.5833105,2.5082208 2.671207,3.27138 2.4502532,4.2906909 1.6704382,4.9212419 1.8457992,6.2881637 2.7330044,6.7362303 3.6138168,7.1616565 4.5774771,6.6121754 5.4481171,6.4039555 6.4752162,6.0090891 7.593619,5.2537912 7.6695772,4.0478079 Z";
        public static String sP = "M 7.6539875,3.6348041 C 7.1799732,4.697917 5.9107301,4.9033305 4.9031992,5.1617495 3.924774,5.2773518 3.218753,6.1984104 3.7309848,7.1095907 3.4313859,7.8366145 3.0298655,6.2721344 2.9930137,5.9279592 2.8575696,4.9111331 3.4219196,3.9640744 3.4350449,2.9512942 3.7006968,2.4649666 3.9791,3.4270128 3.7433184,3.7092905 3.561149,4.2724622 3.3105682,5.5191326 4.3007465,5.3064835 5.1292659,4.762559 6.2732272,4.7518664 6.9585179,3.9612172 7.3906488,3.0621884 6.0536498,2.7867943 5.4375915,2.5743765 4.3869926,2.2224136 3.1686294,1.9426744 2.1297735,2.482431 2.0638993,1.4729595 3.4108998,1.65616 4.0479594,1.864157 5.3406033,2.1656358 6.9491297,2.335965 7.6539875,3.6348041 Z";
        public static String sA = "M 8.4478707,4.5874191 C 7.5945929,4.3116022 6.7199865,5.1936504 7.2059669,6.0226655 7.3065433,6.5002674 8.2767916,7.1937578 7.9778341,7.453331 7.1370217,7.1107652 6.9443025,6.0732563 6.5510547,5.3418434 6.1858096,4.5630545 5.2513167,5.2730367 4.5955655,5.1271242 3.647932,5.1690573 2.5849855,5.4638071 2.1023754,6.3599609 2.0244353,6.7732418 0.89630875,7.5015945 1.52156,6.7796111 2.0290224,6.1609868 2.6655351,5.6009289 2.9128347,4.8147301 4.0147572,4.1015228 4.4923677,2.8366294 5.2150379,1.8041072 5.7978403,1.0322464 6.2140012,2.2032549 6.3227202,2.7044193 c 0.2048211,0.68979 0.3073957,1.6226221 1.0601998,1.9333195 0.3476581,0.1102105 0.7220959,0.044458 1.0649507,-0.05032 z m -2.010213,-0.26355 C 6.1104464,3.7325331 6.119909,2.3598234 5.2322364,2.4900139 4.7550793,2.9845952 4.2936837,3.5549764 3.9168939,4.1107798 4.0857123,5.044168 5.293393,4.7675671 5.9858615,4.7560612 6.4634149,4.8094104 6.3231633,4.5185562 6.4376577,4.3238691 Z";
        public static String sS = "M 7.7930219,4.9597785 C 8.6067641,5.5570168 8.1602276,6.8467879 7.1690671,6.8816322 5.9607109,7.2366741 4.6719325,7.2674387 3.4255498,7.1785216 2.7160933,7.1260702 1.1115477,6.7314299 1.6892482,5.7625726 1.8505956,6.4678844 2.7151119,7.0058116 3.5001586,6.8302537 4.818114,6.8208203 6.2577221,7.0570133 7.4568336,6.3477897 8.1132012,6.167045 8.1374677,5.4230601 7.4541131,5.2662857 6.3137038,4.6154699 4.9065892,4.8012076 3.7742843,4.1462654 3.1974209,3.8894574 2.6126054,2.9010122 3.3930329,2.5272503 4.5356322,1.8000117 5.9583832,1.6333272 7.2727765,1.9003824 7.9840021,2.066079 7.1070525,2.6406703 6.7266638,2.3317674 5.9191409,2.1392815 5.0443344,2.0514597 4.2830497,2.4676096 3.6322143,2.543898 2.88752,3.2798763 3.7420038,3.7161258 4.8154046,4.4377988 6.1806228,4.3258335 7.3483125,4.81157 7.4969664,4.859709 7.6451547,4.909277 7.7930219,4.9597785 Z";
        public static String sD = "M 7.8721116,4.9901154 C 7.536021,5.9815261 6.3925034,6.2902417 5.4552271,6.3450818 4.6208604,6.422929 3.6230198,6.4329984 3.0859831,7.1897103 2.1214744,6.9539422 3.0357092,6.0255135 2.9524396,5.4118859 2.9979091,4.3607492 3.2699188,3.1317492 2.5244131,2.2519699 2.3357329,1.9421315 1.4640901,1.9043341 2.1995829,1.8478026 4.2988092,1.5960473 6.5033583,2.6750242 7.618208,4.4647961 7.7159044,4.6331702 7.8014319,4.8087009 7.8721116,4.9901154 Z m -0.39274,0.06201 C 6.8740239,3.4761942 5.1807585,2.5625476 3.5713566,2.4003026 3.1438026,2.9732803 3.5537151,3.9119534 3.3418738,4.6200825 3.3873952,5.1281523 3.1854983,6.029865 3.5172206,6.2874797 4.7870227,6.034778 6.3019182,6.2775103 7.3051446,5.2873623 7.3698596,5.2141692 7.4281895,5.1353426 7.4793716,5.0521254 Z";
        public static String sF = "M 6.8673253,1.6794777 C 7.2971933,1.977704 6.1058117,1.8876426 5.883346,1.979654 5.1093035,2.0780807 3.8540925,1.7434186 3.5911132,2.7653549 3.3901807,3.5135971 3.9928617,4.5025579 4.8364997,4.3416235 5.471154,4.1182494 6.874769,4.0324052 7.0831654,4.2166868 6.0166504,4.6031054 4.700308,4.1581423 3.7722198,4.9382511 3.0428211,5.4946892 3.5633989,6.3934369 3.3238546,7.1184872 2.9584827,8.0085375 3.0739354,6.5906495 3.1022897,6.2417401 3.3504026,5.4592949 2.4844042,4.8853551 2.7492062,4.134433 3.5959489,3.4757858 2.5944295,2.6862788 2.7420842,1.9310818 3.324732,1.4472665 4.2296487,1.6514059 4.9544194,1.5937853 c 0.6378519,0.019336 1.275942,0.049462 1.9129059,0.085692 z";
        public static String sG = "M 8.1626012,4.2222127 C 7.3743761,5.3723411 7.9243695,6.8035191 7.7173783,8.0795597 7.1125642,7.58134 7.3014656,6.6579488 7.2653323,5.9564448 7.3678642,5.3509175 6.881194,4.9091855 6.3670746,5.3689459 5.1289593,5.7917928 3.7156713,6.2015975 2.4503874,5.657314 1.7714345,5.287705 1.2610937,4.2492881 1.937042,3.6401393 2.7250936,2.621716 3.8732183,1.9442322 5.0209619,1.4056855 5.6456154,1.2047677 7.0085939,0.45762953 7.2741257,1.3500216 6.4751434,1.6056694 5.4110511,1.3896277 4.589134,1.8955312 3.4782944,2.4063453 2.3810945,3.3258648 2.1627762,4.5874769 2.2088001,5.3943091 3.299021,5.4960494 3.9315371,5.5835435 5.0112145,5.6137399 6.1040735,5.3212581 7.0452047,4.7989109 7.5397444,4.5568664 7.2746695,3.5518739 7.99388,4.1073434 l 0.088023,0.058975 z";
        public static String sH = "M 8.1134936,3.6866078 C 7.2126442,3.6922185 6.3785625,4.4318111 6.4731306,5.3732309 6.4195434,5.9856645 6.6344043,7.117499 6.2785777,7.3967936 5.7077606,6.4340379 6.6478861,5.2219411 5.9397225,4.3053481 5.2507385,3.7462123 4.344768,4.3999426 3.5595713,4.3119189 2.8688674,4.193595 1.7593991,4.4057291 1.8036145,5.3026619 1.7848655,5.857247 2.0984473,6.4920956 1.766129,6.9934566 1.23753,5.3687143 1.359666,3.617038 1.6784273,1.9635516 2.2027559,1.5091187 2.1079868,2.8853276 1.9425191,3.2066618 2.0757859,4.2826213 3.4666162,4.0350835 4.2337245,3.9365473 4.9503141,3.6946108 6.425939,4.2308364 6.2353041,3.0168456 6.1518517,2.6368003 5.8634813,1.231692 6.6047665,1.6983353 7.0898513,2.3051619 6.2886712,3.205946 6.9597304,3.7749309 7.3083683,4.0214006 7.748227,3.7472619 8.1134936,3.6866078 Z m 0.263549,0 c -0.2239124,0.3812399 -0.3563466,-0.2173164 0,0 z";
        public static String sJ = "M 7.7152394,2.6330654 C 7.4402942,4.2694016 7.720785,6.1220652 6.6599056,7.5273289 6.1469208,8.2177942 5.3029412,8.635106 4.4395489,8.5141179 3.6285163,8.5111813 2.7475832,8.4813405 2.0661905,7.9839206 2.5590035,8.0387014 3.2764727,8.370556 3.8931034,8.3112253 5.0617961,8.364024 6.4823372,7.8592903 6.8156652,6.6187708 7.32308,4.7243286 7.2499019,2.746006 7.0994665,0.80861775 7.0301789,0.01866788 7.9119783,0.77940897 7.646717,1.2558087 c -0.00291,0.4560732 -0.080478,0.9369092 0.068522,1.3772567 z";
        public static String sK = "M 8.2462473,6.1074551 C 7.6560824,7.0046831 6.4056316,7.3645289 5.4389957,6.8757615 4.3228685,6.4331132 3.469188,5.5579431 2.4880699,4.8964424 1.5429148,5.084887 2.1281871,6.3778623 1.9121495,7.0433289 1.7974105,7.5279669 1.3872538,7.4985703 1.5911674,6.9890127 1.7728552,5.2859052 1.412295,3.5423203 1.8538743,1.8647991 2.5763674,2.4902428 1.8811325,3.5234842 2.2868573,4.2650662 2.964299,4.8607779 3.8732787,4.2196721 4.5295409,3.8890053 5.4348873,3.3503108 6.1824662,2.5506898 6.6597923,1.6115941 6.7449204,2.7318176 5.7421174,3.5053467 4.8789907,4.0167315 4.4171993,4.4005851 3.3209156,4.5763746 3.1635644,4.8684515 4.2725883,5.7881963 5.542131,6.8446055 7.0727543,6.7515344 7.5248874,6.6885404 7.9489359,6.4531467 8.2462473,6.1074551 Z";
        public static String sL = "M 7.5934937,6.2781384 C 6.8524434,6.8837908 5.8254227,6.7766426 4.950787,7.0391668 4.1618027,7.2620496 3.1005179,7.3749264 2.5714038,6.6002791 1.9767752,5.6781362 2.2203989,4.5087221 2.3407391,3.4893108 2.5287841,3.0013817 2.4043183,1.8891084 2.7325599,1.7969925 3.2899094,2.3348418 2.8166613,3.1341635 2.7129116,3.7670147 2.5746317,4.6630518 2.2172268,5.7714936 2.9558975,6.5121461 3.8538964,7.1579855 5.0111742,6.7630851 5.9964843,6.5793484 6.5248698,6.4607499 7.0507077,6.3134711 7.5934937,6.2781384 Z";
        public static String sZ = "M 8.3215357,6.7765081 C 8.3267344,6.4641958 9.0336258,5.4428683 8.9067113,6.2942338 8.8466722,7.1432584 8.0183173,7.7556421 7.2006399,7.4630313 5.2304076,7.3076665 3.2824654,6.4246553 1.2913608,6.8928608 0.3604009,7.3252257 1.1699136,6.2169404 1.5341854,6.0357812 2.2552116,5.4812368 3.116968,5.0758676 3.6551159,4.3171154 4.4593908,3.6327936 5.4297292,3.0325908 5.8514114,2.0171004 4.5629699,1.7957317 3.1745252,2.4845098 1.9578765,1.8252388 1.8924871,1.4270457 2.9489544,1.7064699 3.2971157,1.6076487 4.4945469,1.619183 5.7103595,1.73021 6.8900964,1.4641484 6.3777315,2.6940156 5.0917251,3.2937089 4.2772847,4.2849036 3.6786114,4.9489293 2.6713866,5.270612 2.2648878,6.0721684 2.451797,6.9749982 3.7216862,6.2190376 4.3616774,6.5842022 5.6571895,6.816687 7.0311172,7.2980906 8.3215357,6.7765081 Z";
        public static String sX = "M 8.0439283,6.2685359 C 8.1245143,7.3576054 6.6928539,6.5553599 6.2767399,6.1593942 5.7383008,5.8848597 5.528481,4.9291434 5.0607591,4.8330445 3.8201045,5.5280876 3.0877677,6.9076121 1.7342313,7.4312656 2.5073479,6.2692776 4.0405909,5.7962127 4.6135828,4.4800322 4.8617206,3.5375813 3.8759935,2.9953687 3.3144823,2.4435019 2.9443845,2.1498946 3.0556976,1.4489973 3.5914195,1.8536878 4.481073,2.1194945 4.4202615,3.6808671 5.376134,3.5818293 6.1317428,3.1685995 6.2929545,2.1842392 6.9621515,1.6662909 7.715211,1.2098074 6.9908076,2.5130558 6.7388577,2.7187229 6.2811136,3.2904863 5.5776137,3.8532067 5.6271234,4.6544604 c 0.2967164,0.8691932 1.196424,1.4724274 1.9846695,1.844403 0.1750205,0.027151 0.3610559,-0.064171 0.4321354,-0.2303275 z";
        public static String sC = "M 7.7667644,5.4009598 C 7.0119918,6.8747028 5.1800893,7.5005067 3.6100199,7.2964018 2.7284779,7.1654742 1.9151829,6.3925722 2.0245789,5.4511792 2.0083073,4.0015521 2.6713271,2.3872248 4.0584934,1.7686956 5.0310743,1.3786938 6.3135239,2.1652334 6.2908932,3.2356705 5.9605658,4.2975816 5.5303647,2.5696305 5.1814553,2.2649912 4.4920803,1.7898642 3.5839841,2.3045728 3.1531698,2.9057674 2.4951503,3.8177493 2.1405353,5.0829519 2.5580975,6.1661683 2.9427108,7.0951857 4.1543228,7.1895312 5.0093196,6.9866486 6.0472989,6.702032 6.9044246,6.013355 7.7667644,5.4009598 Z";
        public static String sV = "M 7.7846004,2.0433653 C 7.4058563,4.0095081 5.808107,5.3632862 4.8005629,7.0033964 4.4348109,7.28899 4.3648175,6.2055782 4.0950937,5.9198346 3.4623521,4.5957971 2.6946485,3.3432119 1.9968295,2.0537053 3.255756,2.6477984 3.5430708,4.1305612 4.0871989,5.2762715 4.2097246,5.865965 4.9023286,6.7392413 5.2997727,5.8341765 6.2946689,4.6705595 6.8433886,3.217831 7.6812204,1.9503423 Z";
        public static String sB = "M 8.195715,5.6053464 C 7.4766229,6.8572398 5.9119845,7.1645891 4.5871225,7.2715299 4.0547786,7.2930263 2.9443342,7.7120348 3.1491034,6.8081478 3.0651347,5.9775991 2.6454937,5.1150248 3.0207927,4.2991829 3.0391543,3.5812096 3.0118618,2.6159818 2.4290629,2.1307307 2.0803669,1.9697584 1.1771927,2.1975151 1.7983348,1.6653928 2.5499956,1.481565 3.3076042,1.8490921 4.0660405,1.8846831 4.89309,1.964223 5.7700462,2.0801315 6.4450078,2.6015445 6.9694289,3.509694 5.5922672,3.7360801 5.0085496,3.9709876 4.6322724,4.136471 3.7509289,4.3966812 3.7827854,4.6933588 4.5349288,4.8751773 5.3259377,4.7825962 6.0842478,4.9460439 6.8207792,5.0152013 7.5962883,5.1357634 8.195715,5.6053464 Z M 6.335364,2.9181724 C 5.5024944,2.5019023 4.576024,2.152387 3.6289987,2.2687942 2.9193575,2.6866652 3.1756059,4.4140197 4.1394058,4.1273693 4.8183844,3.7360466 5.6191888,3.5395629 6.2386462,3.0824589 l 0.053679,-0.078166 z m 1.343587,3.079915 C 7.1776719,5.1419928 6.067344,5.1373616 5.1927853,5.1129234 4.4477853,5.1260706 3.0763539,4.8280413 3.3513,6.041068 3.2271092,6.9577087 4.1710994,7.5185155 4.9348881,7.0259726 5.8649209,6.7343799 6.8760756,6.5913658 7.678951,5.9980874 Z";
        public static String sN = "M 7.8780698,2.5339296 C 7.4492222,4.1137335 7.5269946,5.7715752 7.2114398,7.3708443 7.3911347,6.4389298 6.611668,5.6526737 5.7752248,5.4049752 4.8468376,5.0273463 3.7925112,4.6161718 3.3613293,3.6303176 2.7865509,2.9676104 2.1743852,3.800184 2.2750904,4.4261507 2.1974131,5.195002 2.3690513,5.9815665 2.1681071,6.738753 1.5987801,6.1908378 2.1463795,5.2685409 2.0076509,4.5653822 2.001573,3.6661767 1.9284017,2.7518622 2.1394975,1.8683748 2.8151071,1.9535305 2.8314777,3.0454565 3.4740036,3.3467669 4.4623903,4.3979147 5.6679854,5.3159338 7.0874178,5.6758446 7.5809653,4.4570315 6.9184335,3.0795409 7.4554452,1.878703 7.9598976,1.1088598 7.6287129,2.3589361 7.8780698,2.5339296 Z";
        public static String sM = "M 8.8174895,7.2833952 C 7.8372825,7.0166846 7.8526758,5.8153078 7.843874,4.9944809 7.8944401,4.4085529 7.9239016,2.7657249 6.975747,3.325335 6.4314224,4.0744467 5.8764094,4.8108714 5.234932,5.486718 4.8155026,6.0700868 4.0865534,6.0812003 4.0327911,5.286102 3.6769745,4.5007747 3.2283001,3.6640544 2.4659971,3.2161784 1.7610284,3.3914976 2.1080444,4.5521363 1.7032406,5.0812106 1.5011027,5.6389361 1.3020367,6.686613 0.97123494,6.8963074 0.89062525,6.0711905 1.5046962,5.3483259 1.5046348,4.5164076 1.6712192,3.5849644 1.7424678,2.6358687 1.9807122,1.7178535 3.0890443,2.7848761 3.4444371,4.4288554 4.671064,5.3936256 5.5606352,4.7650471 6.1530463,3.8206421 6.8979479,3.0424696 7.2321487,2.7420455 7.4610252,1.7186389 7.7909485,1.8077378 8.6754358,3.5155369 7.6499367,5.6578996 8.8174895,7.2833952 Z";
        public static String s1 = "M 7.1146454,6.7822514 C 5.6888974,7.1126725 4.2117349,7.0478835 2.7635104,6.9425024 2.8581861,5.9789126 4.4900817,7.1819843 4.5314992,6.172751 4.3049017,5.3563633 4.5033748,4.5888246 4.6625319,3.7900124 4.8325303,2.9468783 4.0668179,3.0063265 3.5498917,3.2849897 3.2558174,3.4618806 2.1432367,3.2380576 2.9621845,3.1748634 3.7753494,3.1807644 4.2917013,2.570245 4.8543109,2.1061914 5.2675585,1.7554561 5.8206938,2.1628039 5.3498658,2.5951383 4.7699596,3.7709249 4.502888,5.1830229 4.9623615,6.4447454 c 0.5423053,0.4978569 1.3651133,0.1661282 2.0201884,0.3442649 0.044051,-0.00137 0.088061,-0.00478 0.1320955,-0.00676 z";
        public static String s2 = "M 7.6427915,6.9978084 C 6.6951215,7.5884572 5.6116937,7.0004891 4.6588675,6.7436413 3.8209057,6.2353109 2.9797735,7.2355728 2.1536775,6.8165122 1.9737861,5.9179317 3.4554513,5.7450484 4.0492695,6.069688 4.7917504,6.0337394 5.3221624,5.3804032 5.892243,4.9681286 6.4832513,4.4742713 7.0321148,3.598639 6.5643209,2.8486411 6.0002251,1.9175845 4.7498521,1.9328154 3.84856,2.3001855 3.3012569,2.501787 2.7961534,2.7978375 2.2942345,3.0910447 2.3731203,2.109975 3.5148883,1.7689971 4.3478819,1.7531446 5.3688876,1.7076879 6.6565095,2.0216164 7.0284363,3.0977427 7.3030127,4.0832736 6.5168386,4.928921 5.7391823,5.4023084 5.1280977,5.6314229 4.3534915,6.5803506 5.4454367,6.6275951 6.1472833,6.867745 6.8893667,7.156486 7.6427915,6.9978084 Z M 3.7463885,6.4035297 C 3.4495727,5.9178701 2.1265624,6.5827369 3.027797,6.7431929 3.2935376,6.6976217 3.5255461,6.5497678 3.7463885,6.4035297 Z";
        public static String s3 = "M 7.5036002,5.6863927 C 6.3685544,6.9858681 4.4657619,7.0829473 2.8732413,6.8444283 2.3620735,6.943776 1.9681544,6.3991383 2.6155668,6.2104171 3.0990589,6.4774663 3.4698377,7.1298773 4.1299841,6.7126296 5.0295721,6.5003317 6.0783287,6.5778469 6.8183357,5.943951 7.4489389,5.3209409 6.5617443,4.7941115 5.9574073,4.8426322 5.372467,4.7843231 4.748629,4.8442531 4.2101225,4.5640231 3.7721562,3.8125301 5.2092265,4.0532764 5.5716899,3.7018915 6.3176909,3.6333007 7.0285471,2.4841451 5.8871583,2.4304482 5.0842088,2.1471701 4.2724072,2.489378 3.5382422,2.8003909 3.2579618,3.0181972 2.2756343,2.8684323 2.9955283,2.5942708 4.0719689,2.0701589 5.4246269,1.8037186 6.5331328,2.3733356 7.4076477,2.9543478 6.4794093,3.7006747 5.8090929,3.8443766 5.3678402,3.9283751 4.4370355,4.4972281 5.3630565,4.4980463 c 0.7231571,0.116356 1.6460196,0.1344232 2.0781502,0.8211753 0.045763,0.1165413 0.063329,0.2425304 0.062393,0.3671711 z";
        public static String s4 = "M 7.6125699,4.4354068 C 7.3142186,5.4071277 6.0215893,4.8219893 5.5121213,5.4874852 5.1508445,5.9509762 5.7230172,7.1751782 5.3008443,7.2866338 4.9702066,6.6119599 5.560387,5.8224972 4.9970275,5.2118407 4.437334,4.4784367 3.4389687,4.618734 2.7267821,5.024168 2.1990794,5.3148629 1.8960443,4.6169919 2.5093374,4.5150243 3.1938507,4.4110323 3.7276638,3.9768696 4.0937771,3.4081791 4.4526358,2.9061825 4.7482544,2.3460146 5.2203038,1.9362585 5.842231,1.8990509 5.021923,2.8352412 4.8214812,3.0567874 4.3886467,3.4145353 3.4584492,4.4717841 4.5530656,4.5621158 5.4966886,4.7486986 5.8133667,3.6665451 5.7415042,2.9320044 5.7722972,2.6010641 5.7473977,1.6008585 6.1122525,1.7252614 6.3745074,2.6840712 5.7105274,3.5992608 5.8671996,4.5606976 6.2835291,5.2457898 7.1274769,4.6934653 7.5900298,4.4292272 Z";
        public static String s5 = "M 8.2859725,1.7573469 C 6.8930854,2.3850208 5.223851,1.6424647 3.8946554,2.4715206 3.2598499,2.856928 2.860347,4.1959896 4.0186335,3.9124101 4.822436,3.8805961 5.7430852,3.6958254 6.4276964,4.2393962 7.0396947,5.1293996 6.4070424,6.3454944 5.5115039,6.762058 4.4081218,7.3902771 2.8497064,7.474636 1.8618319,6.5906494 1.6162129,6.3631242 1.2892453,5.3867678 1.6685053,6.1400449 2.403744,7.0794656 3.7948421,7.1090475 4.8475928,6.77959 5.7006421,6.5263571 6.5505449,5.679706 6.2799513,4.7268916 5.9221277,4.0523633 5.0294002,4.150864 4.3807461,4.177824 3.7847614,4.103888 2.7351737,4.6794551 2.4557292,3.9473869 2.9035752,3.4216918 3.5343819,2.7078616 3.1321813,1.9972212 3.7941607,1.7619365 4.5806349,1.85323 5.2943195,1.7966033 c 0.9972101,-0.010485 1.9955748,0.024091 2.991653,-0.039256 z";
        public static String s6 = "M 7.5496549,5.1309054 C 6.6259686,6.4163098 5.0429646,7.3556043 3.428061,7.1961287 2.7659283,7.1118309 2.0871583,6.6433163 2.2586951,5.8979163 2.2757328,3.9633569 3.7604114,2.0887142 5.6998449,1.7874614 5.695706,2.816993 4.1295364,2.2520025 3.7352601,3.0802522 3.1838265,3.8438865 2.6531274,4.6797885 2.4827607,5.6210102 2.2585632,6.0985718 2.9716835,7.0848643 3.0789522,6.1534089 3.2924471,5.4939077 3.9871278,5.123983 4.5383023,4.7615562 5.2889231,4.3758609 6.260545,4.0805582 7.0551573,4.4979806 7.2860927,4.6437084 7.4673669,4.8698231 7.5496549,5.1309054 Z m -0.29456,0.02067 C 6.7652323,4.2583303 5.5420522,4.5426797 4.8014735,4.9247977 4.1100407,5.2564328 3.3732017,5.7966792 3.2864658,6.6197719 3.8191381,7.2957318 4.8400109,6.6095262 5.5243177,6.4942118 6.2083264,6.2187802 6.8644657,5.7925794 7.2550949,5.1515754 Z";
        public static String s7 = "M 8.6010496,3.4773875 C 7.5112809,3.7856954 6.1687661,3.4763745 5.3052248,4.3707114 4.6855234,5.4908804 3.8902721,6.520384 2.9833473,7.4217446 2.4889996,7.8681105 1.8614274,8.2167409 1.1803803,8.2213382 3.0364572,7.5065953 4.292154,5.8232516 5.2152466,4.1347161 5.4502689,3.4487083 4.1782438,4.036307 3.7942599,3.6821699 3.1218235,3.2012606 4.5237722,3.3889057 4.8005925,3.5171146 5.7601561,3.7702509 6.2791402,2.7036822 6.4599591,1.9395396 6.59563,1.5958933 6.6898743,1.3021621 6.2198852,1.5218533 4.8741857,1.8066352 3.3375132,2.118692 2.0807735,1.3812896 1.5361588,0.89791411 2.7309805,1.4794862 3.0144741,1.4129 4.5195172,1.6133097 6.0524954,1.3192452 7.4590493,0.7799105 7.2494398,1.6637814 6.3844756,2.2299974 6.2346748,3.1376846 c 0.4988813,0.8152757 1.5436497,0.03736 2.27628,0.3057148 z";
        public static String s8 = "M 7.1873115,2.9137806 C 6.6582639,3.8444701 5.4764964,4.0756633 4.8631786,4.927106 4.6644799,5.8259197 6.0967151,5.7667314 6.1251764,6.6300655 6.0843704,7.6259746 4.7617499,7.5571629 4.0416862,7.4555739 3.2353528,7.494574 2.032535,6.7746023 2.8888232,5.9541326 3.4892174,5.5634923 4.2080755,4.6950342 3.1626766,4.3181439 2.254881,3.9023643 2.5375455,2.5930113 3.29088,2.167151 4.1833491,1.5611678 5.4269289,1.2441469 6.4433223,1.7231766 6.8930419,1.9481051 7.1794019,2.4113723 7.1873115,2.9137806 Z m -0.31523,-0.08785 C 6.8283803,2.0675889 5.7695344,1.4645817 5.1517135,1.9185836 5.1215565,2.218137 5.3359904,2.6102352 4.9197963,2.2672222 3.9206696,1.9254142 2.653937,3.0169898 3.0720213,4.0573962 3.4738165,4.8570099 4.5929989,4.929796 5.2031303,4.3282531 5.7745338,3.8484919 6.499164,3.4173716 6.8720815,2.8259306 Z m -0.89917,3.9274077 C 5.7375252,5.5864479 4.0921903,4.9430932 3.2144222,5.8326423 2.4148144,6.4780176 3.2408101,7.4037368 4.078939,7.22959 4.7339383,7.2999183 5.4712372,7.2246817 5.9729115,6.7533383 Z";
        public static String s9 = "M 8.5206717,3.3816834 C 8.283216,5.930522 6.2525956,8.1818545 3.7822557,8.7831096 2.9467853,8.9608703 2.0561627,8.9084456 1.2601627,8.5906601 2.2440336,8.3884349 3.2707842,8.9426641 4.2355325,8.5192828 5.4151697,7.9471331 6.552692,7.1819606 7.2711337,6.0569411 8.0033271,4.9596299 8.4044965,3.522777 7.9755393,2.2394216 7.5395172,2.7480365 7.029121,3.2941027 6.2906957,3.4245204 5.3282224,3.8835359 4.09192,3.0085961 4.6556471,1.9463739 5.044885,1.0073415 5.9509834,0.1246214 7.0202698,0.11712267 7.8370725,0.14285807 8.1316108,1.0504892 8.2662637,1.7191438 8.4148077,2.2638839 8.5306144,2.813147 8.5206717,3.3816834 Z m -0.78548,-1.653646 C 7.8762839,0.73170807 6.6116944,0.13399396 5.9418254,0.91308524 5.2857984,1.3334256 4.2995147,2.6021611 5.2434693,3.1851098 6.002901,3.3974147 6.8197334,2.9872548 7.3593243,2.4659652 7.5480537,2.2600465 7.6863432,2.0044494 7.7351917,1.7280374 Z";
        public static String s0 = "M 7.1431284,3.6991397 C 7.4555766,5.0910789 6.3304049,6.3511365 5.139775,6.8928063 4.354712,7.2548694 3.3213462,7.2926273 2.6472384,6.6808767 2.3492343,4.8897547 3.1356871,2.7718076 4.8684245,2.0067512 5.6590469,1.5266396 6.306268,2.219529 6.7195536,2.8271135 6.9119056,3.0886103 7.0681925,3.3815781 7.1431284,3.6991397 Z m -0.1912,0.501261 C 7.0555115,3.2306685 6.1908748,2.2206922 5.179035,2.4041432 4.3730974,2.4924044 3.6767834,3.1384889 3.4897184,3.9213457 2.6606973,4.593765 2.4647606,6.1093188 3.4230018,6.7581876 4.1853149,7.2548453 5.0273641,6.6548022 5.6372991,6.1947797 6.3060681,5.7423938 6.9892359,5.0735248 6.9519284,4.2004007 Z";


        public static void Connect(List<SVG_d> a, List<SVG_d> b)
        {          
            if(a[0].code == 'm' && b[0].code == 'm'){
                SVG_rec ar = SVG_d.GetLen(a);
                b[0].data[0].a = b[0].data[0].a - ar.xe; 
                b[0].data[0].b = b[0].data[0].b - ar.ye;
                for (int tt = 0; tt < b.Count; tt++) a.Add(b[tt]);
            }
        }


        public SVG_d(char icode)
        {
            code = icode;
        }

        public override string ToString()
        {
            String s = String.Empty;
            s += code;
            foreach (SVG_d_block vdd in data)
            {
                s += ' ';
                s += vdd.ToString();
            }
            return s;
        }

        public static double AreaTriangolo(
            double x1,double y1,
            double x2,double y2,
            double x3,double y3){
            double d12 = Math.Sqrt((x1-x2)*(x1-x2)+(y1-y2)*(y1-y2));
            if(d12==0)return 0;
            double d23 = Math.Sqrt((x2-x3)*(x2-x3)+(y2-y3)*(y2-y3));
            if(d23==0)return 0;
            double d31 = Math.Sqrt((x3-x1)*(x3-x1)+(y3-y1)*(y3-y1));
            if(d31==0)return 0;
            double p = (d12+d23+d31)/2.0;
            return Math.Sqrt(p*(p-d12)*(p-d23)*(p-d31));

        }
        public static SVG_rec GetLen(List<SVG_d> path)
        {
            double xo=0;
            double yo=0;
            double xs=0;
            double ys=0;
            double Area=0;
            double x = 0;
            double y = 0;
            double l = 0;
            int c = 0;
            int pc = 0;
            SVG_rec rr =new SVG_rec();

            foreach (SVG_d e in path)
            {
                switch (e.code)
                {
                    case 'c':
                        c = 0;
                        while (c < e.data.Count)
                        {
                            c++;
                            c++;
                            xo=x;
                            yo=y;
                            x = x + e.data[c].a;
                            y = y + e.data[c].b;
                            l+=Math.Sqrt(e.data[c].a*e.data[c].a+e.data[c].b*e.data[c].b);
                            Area += AreaTriangolo(xs,ys,xo,yo,x,y);
                            c++;                    
                        }
                        break;
                    case 'q':
                        c = 0;
                        while (c < e.data.Count)
                        {
                            c++;
                            xo=x;
                            yo=y;                            
                            x = x + e.data[c].a;
                            y = y + e.data[c].b;
                            l+=Math.Sqrt(e.data[c].a*e.data[c].a+e.data[c].b*e.data[c].b);
                            Area += AreaTriangolo(xs,ys,xo,yo,x,y);
                            c++;
                        }
                        break;
                    case 'z':
                        break;
                    case 'm':

                        if(l>rr.lung_tratto)rr.lung_tratto =l;
                        rr.lung_tot+=l;
                        l=0;

                        if (pc == 0)
                        {
                            x = 0;
                            y = 0;                                                        
                        }

                        x = x + e.data[0].a;
                        y = y + e.data[0].b;
                        xs=x;
                        ys=y;

                        if(pc==0)
                        {
                            rr.xs = x;
                            rr.ys = y;                            
                        }
                                                                 
                        break;
                    case 'l':
                        c = 0;
                        while (c < e.data.Count)
                        {
                            xo=x;
                            yo=y;
                            x = x + e.data[c].a;
                            y = y + e.data[c].b;
                            l+=Math.Sqrt(e.data[c].a*e.data[c].a+e.data[c].b*e.data[c].b);
                            Area += AreaTriangolo(xs,ys,xo,yo,x,y);
                            c++;
                        }
                        break;
                    case 'h':
                        c = 0;
                        while (c < e.data.Count)
                        {
                            xo=x;
                            yo=y;
                            x = x + e.data[c].a;
                            l+=Math.Sqrt(e.data[c].a*e.data[c].a);
                            Area += AreaTriangolo(xs,ys,xo,yo,x,y);
                            c++;
                        }
                        break;
                    case 'v':
                        c = 0;
                        while (c < e.data.Count)
                        {
                            xo=x;
                            yo=y;                            
                            y = y + e.data[c].b;
                            l+=Math.Sqrt(e.data[c].b*e.data[c].b);
                            Area += AreaTriangolo(xs,ys,xo,yo,x,y);
                            c++;
                        }
                        break;
                }
                pc++;
            }

            if(l>rr.lung_tratto)rr.lung_tratto =l;
            rr.lung_tot+=l;
            rr.xe = x;
            rr.ye = y;
            rr.Area =Area;
            return rr;
        } 

        public static void ReadSVG_d_attribute(List<SVG_d> e, string pppp,string trans)
        {            
            //string pppp = path_nome.Attributes["d"].Value.Trim();
            if (pppp.Length == 0) return;
            string[] vs = pppp.Trim().Replace("   ", " ").Replace("  ", " ").Replace(",", " ").Split(' ');

            //fixparser
            if ((1.5).ToString().Contains(","))
            {
                for (int k = 0; k < vs.Length; k++)
                {
                    vs[k] = vs[k].Replace(".", ",");
                }
            }

            double aa = 1.0;
            double bb = 0.0;
            double cc = 0.0;
            double dd = 1.0;
            double ee = 0.0;
            double ff = 0.0;

            if (trans.Length>0)
            {                
                int st = trans.IndexOf('(') + 1;
                int en = trans.IndexOf(')');
                string[] mat = trans.Substring(st, en - st).Split(',');
                 aa = Double.Parse(mat[0].Replace(".", ","));
                 bb = Double.Parse(mat[1].Replace(".", ","));
                 cc = Double.Parse(mat[2].Replace(".", ","));
                 dd = Double.Parse(mat[3].Replace(".", ","));
                 ee = Double.Parse(mat[4].Replace(".", ","));
                 ff = Double.Parse(mat[5].Replace(".", ","));
            }

            double x = 0;
            double y = 0;
            double xs = 0;
            double ys = 0;
            double a=0, b=0;
            int i = 0;
            bool Convert;
            SVG_d cur;

            while (i < vs.Length)
            {
                //converti a relativo                    
                Convert = Char.IsUpper(vs[i][0]);
                switch (Char.ToLower(vs[i][0]))
                {
                    case 'm':

                        /// da spezzare per algoritmo di fusione
                        cur = new SVG_d('m'); i++;
                        a = Double.Parse(vs[i]); i++;
                        b = Double.Parse(vs[i]); i++;
                        a = a * aa + b * cc + ee;
                        b = a * bb + b * dd + ff;
                        if (Convert)
                        {
                            a = a - x;
                            b = b - y;
                        }
                        cur.data.Add(new SVG_d_block(a, b));                        
                        e.Add(cur);

                        x += a;
                        y += b;                  

                        xs = x;
                        ys = y;
                        if (i == vs.Length) break;
                        if (!Char.IsLetter(vs[i][0]))
                        {
                            cur = new SVG_d('l');
                            while (!Char.IsLetter(vs[i][0]))
                            {
                                a = Double.Parse(vs[i]); i++;
                                b = Double.Parse(vs[i]); i++;
                                a = a * aa + b * cc + ee;
                                b = a * bb + b * dd + ff;
                                if (Convert)
                                {
                                    a = a - x;
                                    b = b - y;
                                }
                                cur.data.Add(new SVG_d_block(a, b));
                                x += a;
                                y += b;
                                if (i == vs.Length) break;
                            }
                            e.Add(cur);
                        }
                        break;
                    case 'l':
                        cur = new SVG_d('l'); i++;
                        while (!Char.IsLetter(vs[i][0]))
                        {
                            a = Double.Parse(vs[i]); i++;
                            b = Double.Parse(vs[i]); i++;
                            a = a * aa + b * cc + ee;
                            b = a * bb + b * dd + ff;
                            if (Convert)
                            {
                                a = a - x;
                                b = b - y;
                            }
                            cur.data.Add(new SVG_d_block(a, b));
                            x += a;
                            y += b;
                            if (i == vs.Length) break;
                        }
                        e.Add(cur);
                        break;
                    case 'c':
                        cur = new SVG_d('c'); i++;
                        while (!Char.IsLetter(vs[i][0]))
                        {
                            for (int oo = 0; oo < 3; oo++)
                            {
                                a = Double.Parse(vs[i]); i++;
                                b = Double.Parse(vs[i]); i++;
                                a = a * aa + b * cc + ee;
                                b = a * bb + b * dd + ff;
                                if (Convert)
                                {
                                    a = a - x;
                                    b = b - y;
                                }
                                cur.data.Add(new SVG_d_block(a, b));
                            }                            
                            x += a;
                            y += b;
                            if (i == vs.Length) break;
                        }
                        e.Add(cur);
                        break;
                    case 'q':
                        cur = new SVG_d('q'); i++;
                        while (!Char.IsLetter(vs[i][0]))
                        {
                            for (int oo = 0; oo < 2; oo++)
                            {
                                a = Double.Parse(vs[i]); i++;
                                b = Double.Parse(vs[i]); i++;
                                a = a * aa + b * cc + ee;
                                b = a * bb + b * dd + ff;
                                if (Convert)
                                {
                                    a = a - x;
                                    b = b - y;
                                }
                                cur.data.Add(new SVG_d_block(a, b));                             
                            }                            
                            x += a;
                            y += b;
                            if (i == vs.Length) break;
                        }
                        e.Add(cur);
                        break;
                    case 'h':
                        cur = new SVG_d('l'); i++;
                        while (!Char.IsLetter(vs[i][0]))
                        {
                            a = Double.Parse(vs[i]); i++;
                            a = a * aa + ee;
                            if (Convert)
                            {
                                a = a - x;
                            }
                            x += a;
                            cur.data.Add(new SVG_d_block(a, 0.0));
                            if (i == vs.Length) break;
                        }
                        e.Add(cur);
                        break;
                    case 'v':
                        cur = new SVG_d('l'); i++;
                        while (!Char.IsLetter(vs[i][0]))
                        {
                            a = Double.Parse(vs[i]); i++;
                            a = a * dd + ff;
                            if (Convert)
                            {
                                a = a - y;
                            }
                            y += a;
                            cur.data.Add(new SVG_d_block(0.0,a));
                            if (i == vs.Length) break;
                        }
                        e.Add(cur);
                        break;
                    case 'z':                        
                        //cur = new SVG_d('z'); i++;
                        //e.Add(cur);
                        cur = new SVG_d('l');i++;
                        cur.data.Add(new SVG_d_block(x-xs, y-ys));
                        x = xs;
                        y = ys;                        
                        break;
                    default:
                        return;
                }
            } 
        }

        public static string UpdateSVG_d_attribute(List<SVG_d> e)
        {
            string d = string.Empty;
            int c = 0;
            foreach (SVG_d i in e)
            {
                if (c > 0) d += ' ';
                d += i.ToString();
                c++;
            }
            return d;
        }      

        public static void Scale(List<SVG_d> path,double sx,double sy)
        {
            foreach (SVG_d e in path)
            {                
                int c = 0;
                while (c < e.data.Count)
                {
                    e.data[c].a = sx * e.data[c].a;
                    e.data[c].b = sy * e.data[c].b;
                    c++;
                }
            }
        }
        
        
    }

}
